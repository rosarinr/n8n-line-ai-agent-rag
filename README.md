# üé¨ LINE Chatbot + MongoDB Vector Store (AI Movie Assistant)

---

## üß© **‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° (Overview)**

Workflow ‡∏ô‡∏µ‡πâ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô **LINE Chatbot ‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞** ‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ:

- üí¨ ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°, ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏≤‡∏á LINE  
- üß† ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡πâ‡∏ß‡∏¢ AI (‡∏ú‡πà‡∏≤‡∏ô **OpenAI GPT-4o-mini**)  
- üéûÔ∏è ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå‡∏à‡∏≤‡∏Å **MongoDB Vector Store**  
- ü§ñ ‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ö‡∏ô LINE ‡πÅ‡∏ö‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥  
- üåê ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÅ‡∏•‡∏∞‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©  

---

## ‚öôÔ∏è **‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ (Configuration Guide)**

### 1. üîó **LINE Webhook**

**Node:** `Webhook`  
**‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå:**  
- HTTP Method ‚Üí `POST`  
- Path ‚Üí `line-n8n-webhook`

**‚úÖ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥:**
1. ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å Webhook URL: https://<your-n8n-domain>/webhook/line-n8n-webhook
2. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà [LINE Developers Console ‚Üí Messaging API](https://developers.line.biz/)  
3. ‡∏ß‡∏≤‡∏á URL ‡∏ô‡∏µ‡πâ‡∏•‡∏á‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á **Webhook URL**  
4. ‡∏Å‡∏î **‚ÄúVerify‚Äù** ‡πÅ‡∏•‡∏∞ **‚ÄúEnable Webhook‚Äù**

---

### 2. üîë **LINE Channel Access Token**

**Node:** `Get image`, `Get audio`, `reply message`

**‚úÖ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥:**
1. ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà **LINE Developers Console**  
2. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Messaging API ‚Üí Channel access token (long-lived)**  
3. ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å token ‡∏°‡∏≤‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞ node:
"Authorization": "Bearer <YOUR_LINE_CHANNEL_ACCESS_TOKEN>"
---

### 3. üß† **Gemini ‡∏´‡∏£‡∏∑‡∏≠ AI ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£**
Node ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ:`Transcribe a recording`, `Analyze an image`, `Google Gemini Chat Model`

‚úÖ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥:
‡∏™‡∏£‡πâ‡∏≤‡∏á API Key
‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏ô‡∏π Credentials ‡πÉ‡∏ô n8n
‡πÄ‡∏û‡∏¥‡πà‡∏° credential: Google Gemini

‡πÉ‡∏ô Node ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å credential ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡∏ï‡πà‡∏≤‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡∏∞ model: gemini-2.5-flash

---
### 4. üß© **MongoDB Atlas Vector Store ‡∏´‡∏£‡∏∑‡∏≠ Vector database ‡∏≠‡∏∑‡πà‡∏ô‡πÜ**

‡πÉ‡∏ô‡∏ó‡∏µ‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ MongoDB Atlas Vector Store <br> 
‚úÖ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ MongoDB Credentials ‡πÉ‡∏ô n8n (‡πÑ‡∏õ‡∏ó‡∏µ‡πà Credentials ‚Üí MongoDB ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏™‡πà Connection String `mongodb+srv://rosarin456:1234@cluster0.pspzc1v.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0`) <br> 
Database: sample_mflix

---
### 5. üóÉÔ∏è Chat Memory (MongoDB Chat Memory ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏∑‡πà‡∏ô‡πÜ)

Node: MongoDB Chat Memory <br> 
‚úÖ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ MongoDB Credentials ‡πÉ‡∏ô n8n (‡πÑ‡∏õ‡∏ó‡∏µ‡πà Credentials ‚Üí MongoDB ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏™‡πà Connection String `mongodb+srv://rosarin456:1234@cluster0.pspzc1v.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0`) <br> 
Database: n8n-rag

--- 
### 6. üß© **Azure AI ‡∏´‡∏£‡∏∑‡∏≠ embedding AI model ‡∏ï‡∏±‡∏ß‡∏≠‡∏∑‡πà‡∏ô‡πÜ**
Node: Embeddings <br> 
‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å sample data: sample_mflix ‡∏°‡∏µ embedding dimension 1536 ‡∏à‡∏∂‡∏á‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å model ‡∏ó‡∏µ‡πà‡πÅ‡∏õ‡∏•‡∏á embedding ‡πÄ‡∏õ‡πá‡∏ô 1536d <br> 
‡πÉ‡∏ô‡∏ó‡∏µ‡∏ô‡∏µ‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ model text-embedding-ada-002

---

‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏1: ‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏°‡∏≤‡∏Å‡πÄ‡∏£‡∏≤‡∏ö‡∏ô‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå‡πÄ‡∏Å‡πà‡∏≤

‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏2: ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏µ‡∏Å‡∏≤‡∏£ embedded ‡∏ä‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏û‡∏•‡πá‡∏≠‡∏ï‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå ‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô ‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö ‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÅ‡∏™‡∏î‡∏á ‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® ‡∏´‡∏£‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡∏Å‡∏≥‡∏Å‡∏±‡∏ö ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏≤‡∏à‡∏Ñ‡∏•‡∏≤‡∏î‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏∞

---
### Testing
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ Test ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ ‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö webhook ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
<br>
‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏µ‡∏Å‡∏ó‡∏≤‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ó‡∏™ workflow ‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà line @832gkadd ‡∏ô‡πâ‡∏≠‡∏á chatbot ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå‡πÅ‡∏•‡πâ‡∏ß !!
